{% extends 'base.html' %}

{% block title %}–ó–∞–∫–∞–∑ ‚Ññ{{ order.id }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">–ó–∞–∫–∞–∑ ‚Ññ{{ order.id }}</h2>
    
    <div class="card mb-4">
        <div class="card-body">
            <p><strong>–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞:</strong> {{ order.created_at|date:"d.m.Y H:i" }}</p>
            <p><strong>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {{ order.total_price }} ‚ÇΩ</p>

            <h4>–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞:</h4>
            <div class="alert 
                {% if order.status == 'PENDING' %}alert-warning
                {% elif order.status == 'PROCESSING' %}alert-primary
                {% elif order.status == 'SHIPPED' %}alert-info
                {% elif order.status == 'DELIVERED' %}alert-success
                {% elif order.status == 'CANCELLED' %}alert-danger
                {% endif %}">
                <strong>
                    {% if order.status == 'PENDING' %} ‚è≥ –û–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    {% elif order.status == 'PROCESSING' %} üîÑ –í –æ–±—Ä–∞–±–æ—Ç–∫–µ
                    {% elif order.status == 'SHIPPED' %} üöö –û—Ç–ø—Ä–∞–≤–ª–µ–Ω
                    {% elif order.status == 'DELIVERED' %} ‚úÖ –î–æ—Å—Ç–∞–≤–ª–µ–Ω
                    {% elif order.status == 'CANCELLED' %} ‚ùå –û—Ç–º–µ–Ω–µ–Ω
                    {% endif %}
                </strong>
            </div>

            {% if request.user.is_staff %}
                <form method="post" class="mt-3">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="{{ form.status.id_for_label }}" class="form-label">–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å:</label>
                        {{ form.status }}
                    </div>
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </form>
            {% endif %}
        </div>
    </div>

    <h4 class="mb-3">–¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ:</h4>
    <ul class="list-group">
        {% for item in order.items.all %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ item.product.name }}</strong><br>
                    <small>{{ item.quantity }} —à—Ç. √ó {{ item.price }} ‚ÇΩ</small>
                </div>
                <span class="badge bg-secondary">{{ item.total_price }} ‚ÇΩ</span>
            </li>
        {% endfor %}
    </ul>

    <div class="mt-4">
        <a href="{% url 'profile' %}" class="btn btn-secondary">–ù–∞–∑–∞–¥</a>
    </div>
</div>
{% endblock %}
